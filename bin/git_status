#!/usr/bin/env bash

git_status() {
    # Check if we're in a git repository
    if ! git rev-parse --is-inside-work-tree >/dev/null 2>&1; then
        echo ""
        return
    fi

    # Get the current branch name
    local branch
    branch=$(git symbolic-ref --quiet --short HEAD 2>/dev/null || \
        git rev-parse --short HEAD 2>/dev/null || \
        echo "unknown")

    # Check if working directory is clean
    local status
    status=$(git status --porcelain 2>/dev/null)
    if [ -z "$status" ]; then
        # Clean working directory
        echo "#[fg=green]$branch"
    else
        # Uncommitted changes
        echo "#[fg=yellow]$branch*"
    fi
}

git_status
