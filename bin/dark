#!/usr/bin/env bash

gsettings set org.gnome.desktop.interface color-scheme prefer-dark
gsettings set org.gnome.desktop.interface gtk-theme 'black-metal'
gsettings set org.gnome.desktop.interface font-name 'JetBrainsMono Nerd Font'

THEME="zenwritten"

for SOCKET in /run/user/1000/nvim.*; do
  nvim --server "$SOCKET" --remote-send ":set background=dark<CR>"
  nvim --server "$SOCKET" --remote-send ":colorscheme $THEME<CR>"
done

kitty +kitten themes --reload-in=all zenwritten_dark_lines
hyprctl hyprpaper reload "eDP-1, ~/.config/wallpaper/zenwritten_dark_frame.jpg"
hyprctl hyprpaper reload "DP-1, ~/.config/wallpaper/zenwritten_dark_frame.jpg"

hyprctl keyword general:col.active_border "rgba(66666688)"
hyprctl keyword general:col.inactive_border = "rgba(3D3839aa)"

# waybar
sed -i '0,/zenwritten_light\.css/s//zenwritten_dark.css/' "$HOME/.config/waybar/style.css"
pkill -SIGUSR2 waybar

# tmux
tmux source-file ~/.config/tmux/zenwritten_dark.conf
tmux refresh-client -S

# mako
cat ~/.config/mako/dark/config > ~/.config/mako/config
makoctl reload
notify-send "Switched to dark theme" "Zenwritten Dark"

# zathura
cat ~/.config/zathura/zathurarc-dark > ~/.config/zathura/zathurarc

# wofi
cat ~/.config/wofi/dark/style.css > ~/.config/wofi/style.css

# hyprlock
sed -i 's/EFEFEF/BBBBBB/g' "$HOME/.config/hypr/hyprlock.conf"
sed -i 's/BBBBBB/EFEFEF/g' "$HOME/.config/hypr/loginhyprlock.conf"
sed -i 's/zenwritten_dark/zenwritten_light/g' "$HOME/.config/hypr/loginhyprlock.conf"

# btop
sed -i 's/^color_theme *= *.*/color_theme = "zenwritten_dark"/' "$HOME/.config/btop/btop.conf"
